<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Brave Soles VR Showroom</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>

      <!-- ASSETS -->
      <a-assets>
        <a-asset-item id="sandalModel" src="assets/sandal_shoes.glb"></a-asset-item>
        <img id="woodFloor" src="assets/wood_floor.jpg">
        <img id="logo" src="assets/bravesoles_logo.png">
      </a-assets>
      <a-entity 
        camera 
        look-controls 
        position="0 1.6 0" 
        cursor="rayOrigin: mouse" 
        raycaster="objects: .clickable">
      </a-entity>
      <a-circle 
        position="0 0.01 -3" 
        radius="0.8" 
        color="#000" 
        opacity="0.08" 
        rotation="-90 0 0">
      </a-circle>



      <!-- SKY / ENVIRONMENT -->
      <a-sky id="sky" color="#ffedd5"></a-sky>

      <!-- LIGHTING -->
      <a-light type="ambient" color="#fff5e1" intensity="0.6"></a-light>
      <a-light type="directional" color="#ffddb3" intensity="0.4" position="2 4 1"></a-light>

      <!-- FLOOR -->
      <a-plane 
        rotation="-90 0 0" 
        width="10" 
        height="10" 
        src="#woodFloor" 
        repeat="4 4"
        material="roughness: 0.7; metalness: 0.1">
      </a-plane>

      <a-sound src="url(assets/calm_ambient.mp3)" autoplay="true" loop="true" volume="0.3"></a-sound>


      <!-- LOGO -->
      <a-image 
        src="#logo" 
        position="0 3 -4" 
        width="2.5" 
        height="1.2">
      </a-image>

      <!-- PRODUCT DISPLAY -->
      <a-entity 
        id="shoeModel" 
        gltf-model="#sandalModel" 
        position="0 0.9 -3" 
        scale="2 2 2" 
        rotation="0 90 0"
        class="clickable"
        show-info
        animation="property: rotation; to: 0 450 0; dur: 15000; easing: linear; loop: true">
      </a-entity>

      <!-- INFO PANEL -->
      <a-entity id="infoPanel" visible="false" position="0 2 -2.5">
        <a-plane color="#3a2f23" width="2.2" height="1.2" opacity="0.92"></a-plane>
        <a-text 
          value="Crafted from 100% recycled tires.\nHandmade by artisans.\nBrave Soles represents sustainable fashion with soul." 
          color="#fff" 
          position="0 0 0.01" 
          align="center" 
          width="1.8"
          wrap-count="30">
        </a-text>
        <a-plane id="closeBtn" 
                 position="0 -0.4 0.02" 
                 width="0.4" 
                 height="0.15" 
                 color="#AA3333" 
                 class="clickable"
                 close-info>
        </a-plane>
        <a-text value="Close" 
                position="0 -0.4 0.03" 
                align="center" 
                color="#fff" 
                width="1">
        </a-text>
      </a-entity>

      <!-- PROMPT INPUT (HTML) -->
      <div style="position: absolute; top: 20px; left: 20px; z-index: 999;">
        <input type="text" id="promptInput" placeholder="Type 'earthy' or 'eco'" style="padding: 8px; font-size: 1em;">
        <button onclick="submitPrompt()" style="padding: 8px;">Go</button>
      </div>

    </a-scene>

    <!-- SCRIPT -->
    <script>
      function submitPrompt() {
        const prompt = document.getElementById('promptInput').value.toLowerCase();

        if (prompt.includes("earthy") || prompt.includes("eco")) {
          document.querySelector('#sky').setAttribute('color', '#d9e4cc');
          document.querySelector('a-plane').setAttribute('src', '#woodFloor');
          document.querySelector('a-light[type="ambient"]').setAttribute('color', '#e9f5e1');
        } else {
          document.querySelector('#sky').setAttribute('color', '#ffedd5');
          document.querySelector('a-light[type="ambient"]').setAttribute('color', '#fff5e1');
        }
      }

      // Show info popup
      AFRAME.registerComponent('show-info', {
        init: function () {
          this.el.addEventListener('click', function () {
            document.querySelector('#infoPanel').setAttribute('visible', true);
          });
        }
      });

      // Close popup
      AFRAME.registerComponent('close-info', {
        init: function () {
          this.el.addEventListener('click', function () {
            document.querySelector('#infoPanel').setAttribute('visible', false);
          });
        }
      });
    </script>
  </body>
</html>
