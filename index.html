<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Brave Soles VR Showroom</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <!-- INTRO CANVAS -->
    <div id="introCanvas" style="position: absolute; top: 0; left: 0; 
      width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); 
      display: flex; align-items: center; justify-content: center; 
      flex-direction: column; color: white; font-family: sans-serif; z-index: 999;">
      <h1 style="margin-bottom: 20px;">Welcome to Brave Soles VR</h1>
      <button onclick="startExperience()" style="padding: 15px 30px; font-size: 18px; cursor: pointer;">
        Enter VR Experience
      </button>
    </div>

    <a-scene sound>
      <!-- ASSETS -->
      <a-assets>
        <a-asset-item id="sandalModel" src="assets/sandal_shoes.glb"></a-asset-item>
        <img id="woodFloor" src="assets/wood_floor.jpg">
        <img id="logo" src="assets/bravesoles_logo.png">
        <img id="mossWall" src="assets/photo-wall-texture-pattern.jpg">
        <audio id="brandAudio" src="assets/brandstory.mp3" preload="auto" playsinline></audio>
        <audio id="ambientAudio" src="assets/calm_ambient.mp3" preload="auto" playsinline></audio>
        <img id="tireWall" src="assets/striped-black-wallpaper.jpg">

      </a-assets>

      <!-- CAMERA -->
      <a-entity 
        camera 
        look-controls 
        position="0 1.6 0" 
        cursor="rayOrigin: mouse" 
        raycaster="objects: .clickable">
      </a-entity>

      <!-- LIGHTING -->
      <a-light type="ambient" color="#fff5e1" intensity="0.6"></a-light>
      <a-light type="directional" color="#ffddb3" intensity="0.4" position="2 4 1"></a-light>

      <!-- SKY -->
      <a-sky id="sky" color="#ffedd5"></a-sky>

      <!-- FLOOR -->
      <a-plane 
        rotation="-90 0 0" 
        width="10" 
        height="10" 
        src="#woodFloor" 
        repeat="4 4"
        material="roughness: 0.7; metalness: 0.1">
      </a-plane>
      <!-- BRAND STORY PANEL -->
      <a-entity id="brandPanel" visible="false" position="0 2 -3">
        <a-plane color="#3a2f23" width="3.5" height="2" opacity="0.92"></a-plane>
        <a-text 
          value="Brave Soles believes in the power of circular fashion to build a better future for all of us. Founded in 2017 by Christal Earle, Brave Soles is focused on crafting classically styled footwear and accessories with upcycled materials and ethical, small scale production chains." 
          color="#fff" 
          width="3" 
          position="0 0 0.01"
          align="center" 
          wrap-count="60">
        </a-text>
        <a-plane id="closeBrandBtn" 
                position="0 -0.9 0.02" 
                width="0.5" 
                height="0.15" 
                color="#AA3333" 
                class="clickable"
                close-brand-info>
        </a-plane>
        <a-text value="Close" 
                position="0 -0.9 0.03" 
                align="center" 
                color="#fff" 
                width="1">
        </a-text>
      </a-entity>


      <!-- WALLS -->
      <a-plane position="-5 2.5 0" rotation="0 90 0" width="10" height="5" src="#mossWall"></a-plane>
      <a-plane position="5 2.5 0" rotation="0 -90 0" width="10" height="5" src="#mossWall"></a-plane>
      <a-plane position="0 2.5 5" rotation="0 180 0" width="10" height="5" src="#mossWall"></a-plane>

      <!-- LOGO WALL -->
      <a-image 
        src="#logo" 
        position="0 3 -4" 
        width="2.5" 
        height="1.2"
        class="clickable"
        show-brand-info>
      </a-image>

      
      <!-- WOOD WALL BEHIND LOGO -->
      <a-plane 
      position="0 2.5 -4.01" 
      rotation="0 0 0" 
      width="10" 
      height="5" 
      src="#woodFloor"
      material="repeat: 2 2">
      </a-plane>

      <!-- PRODUCT -->
      <a-entity 
        id="shoeModel" 
        gltf-model="#sandalModel" 
        position="0 1.3 -3" 
        scale="2 2 2" 
        rotation="0 90 0"
        class="clickable"
        show-info
        animation="property: rotation; to: 0 450 0; dur: 15000; easing: linear; loop: true">
      </a-entity>

      <a-circle position="0 0.01 -3" radius="0.8" color="#000" opacity="0.08" rotation="-90 0 0"></a-circle>

      <!-- INFO PANEL -->
      <a-entity id="infoPanel" visible="false" position="0 2 -2.5">
        <a-plane color="#3a2f23" width="2.2" height="1.2" opacity="0.92"></a-plane>
        <a-text 
          value="Crafted from 100% recycled tires.\nHandmade by artisans.\nBrave Soles represents sustainable fashion with soul." 
          color="#fff" 
          position="0 0 0.01" 
          align="center" 
          width="1.8"
          wrap-count="30">
        </a-text>
        <a-plane id="closeBtn" position="0 -0.4 0.02" width="0.4" height="0.15" color="#AA3333" class="clickable" close-info></a-plane>
        <a-text value="Close" position="0 -0.4 0.03" align="center" color="#fff" width="1"></a-text>
      </a-entity>
    </a-scene>

    <!-- SCRIPT -->
    <script>
      function submitPrompt() {
        const prompt = document.getElementById('promptInput').value.toLowerCase();
        if (prompt.includes("earthy") || prompt.includes("eco")) {
          document.querySelector('#sky').setAttribute('color', '#d9e4cc');
          document.querySelector('a-plane[rotation="-90 0 0"]').setAttribute('src', '#woodFloor');
          document.querySelector('a-light[type="ambient"]').setAttribute('color', '#e9f5e1');
        } else {
          document.querySelector('#sky').setAttribute('color', '#ffedd5');
          document.querySelector('a-light[type="ambient"]').setAttribute('color', '#fff5e1');
        }
      }

      AFRAME.registerComponent('show-info', {
        init: function () {
          this.el.addEventListener('click', function () {
            document.querySelector('#infoPanel').setAttribute('visible', true);
          });
        }
      });

      AFRAME.registerComponent('close-info', {
        init: function () {
          this.el.addEventListener('click', function () {
            document.querySelector('#infoPanel').setAttribute('visible', false);
          });
        }
      });
      AFRAME.registerComponent('show-brand-info', {
        init: function () {
          this.el.addEventListener('click', function () {
            document.querySelector('#brandPanel').setAttribute('visible', true);
          });
        }
      });

      AFRAME.registerComponent('close-brand-info', {
        init: function () {
          this.el.addEventListener('click', function () {
            document.querySelector('#brandPanel').setAttribute('visible', false);
          });
        }
      });


      function startExperience() {
        const canvas = document.getElementById('introCanvas');
        canvas.style.transition = 'opacity 1s';
        canvas.style.opacity = '0';
        setTimeout(() => canvas.style.display = 'none', 1000);

        const brandEntity = document.createElement('a-entity');
        brandEntity.setAttribute('id', 'brandEntity');
        brandEntity.setAttribute('sound', 'src: #brandAudio; autoplay: true');
        document.querySelector('a-scene').appendChild(brandEntity);

        // Trigger ambient music when brand story ends
        brandEntity.addEventListener('sound-ended', () => {
          const ambientEntity = document.createElement('a-entity');
          ambientEntity.setAttribute('sound', 'src: #ambientAudio; autoplay: true; loop: true; volume: 0.6');
          document.querySelector('a-scene').appendChild(ambientEntity);
  });
}

    </script>
  </body>
</html>
